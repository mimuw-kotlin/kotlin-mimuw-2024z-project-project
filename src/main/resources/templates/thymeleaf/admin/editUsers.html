<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title>Edycja użytkowników</title>
  <script>
    function toggleTable(tableName) {
      let table = document.getElementById(tableName);
      if (table.style.display === "none") {
        table.style.display = "table";
      } else {
        table.style.display = "none";
      }
    }

    function refreshPage() {
      if (shouldRefresh)
      {
        location.reload();
      }
    }
  </script>
</head>

<body th:with="STUDENTS_TABLE='studentsTable', TEACHERS_TABLE='teachersTable'">

<a href="/admin/controlPanel">Powrót</a>

<p th:if="${status} != ''" th:text="${status}"></p>

<p th:if="${status} == '0'" style="color: darkgreen">Zmiany zostały zapisane!</p>

<p th:if="${status} == '1'" style="color: darkred">Błędne parametry w formularzu!</p>

<h1>Edytuj Uczniów</h1>

<p th:if="${status} == '2'" style="color: darkred">Zmodyfikowałeś pole userType bądź index w formularzu ucznia, nie można go modyfikować!</p>

<button onclick=toggleTable("studentsTable")>Pokaż/Ukryj</button>

<br>

<table th:id="${STUDENTS_TABLE}">
  <thead>
  <tr>
    <th>Index</th>
    <th>Nazwa Użytkownika</th>
    <th>Klasa</th>
    <th>Aktywny</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="student : ${students}">
    <td th:text="${student.index}"></td>
    <td th:text="${student.username}"></td>
    <td th:text="${student.classNbr}"></td>
    <td th:text="${student.active}"></td>
    <td>
      <a th:href="'/admin/editChosenUser?index=' + ${student.index}">Edytuj</a>
    </td>
  </tr>
  </tbody>
</table>

<h1>Edytuj Nauczycieli</h1>

<p th:if="${status} == '3'">Zmodyfikowałeś pole nauczyciela którego nie można modyfikować!</p>

<button onclick=toggleTable("teachersTable")>Pokaż/Ukryj</button>

<br>

<table th:id="${TEACHERS_TABLE}">
  <thead>
  <tr>
    <th>Index</th>
    <th>Nazwa Użytkownika</th>
    <th>Klasa</th>
    <th>Typ</th>
    <th>Aktywny</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="teacher : ${teachers}">

    <td th:text="${teacher.index}"></td>
    <td th:text="${teacher.username}"></td>
    <td th:text="${teacher.classNbr}"></td>
    <td th:text="${teacher.userType}"></td>
    <td th:text="${teacher.active}"></td>
    <td>
      <a th:href="'/admin/editChosenUser?index=' + ${teacher.index}">Edytuj</a>
    </td>
  </tr>
  </tbody>
</table>

</body>
</html>
